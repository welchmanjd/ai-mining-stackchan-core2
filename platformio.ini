; PlatformIO Project Configuration File

[platformio]
default_envs = m5stack-core2
src_dir = src


; ===== 共通設定（�Eenvの土台�E�E====
[env]
platform = espressif32
board = m5stack-core2
framework = arduino

monitor_speed = 115200
monitor_filters = esp32_exception_decoder, time
upload_speed = 921600
upload_flags =
  --connect-attempts=20
upload_port = COM3

monitor_dtr = 0
monitor_rts = 0

board_build.f_cpu = 240000000L
board_build.flash_mode = dio
board_build.f_flash = 80000000L

lib_deps =
  m5stack/M5Unified@0.1.16
  meganetaaan/M5Stack-Avatar@0.9.2
  ArduinoJson


; ===== 開発用�E�通常ビルチE/ NORMAL�E�E====
; ---- Debug tips: touch logs ----
; 普段は [TOUCH] を�EさなぁE��ENFO壁紙化防止�E�E; 忁E��なときだけ以下を build_flags に一時的に追加して復活させめE
;   -DEVT_DEBUG_ENABLED=1        ; EVT系DEBUG + TOUCHも追従して出めE;   -DTOUCH_DEBUG_ENABLED=1      ; TOUCHだけ個別に出す！EVTとは独立！E; ※終わったら忁E��OFFに戻す（ログが流れすぎるためE��E
[env:m5stack-core2]
extends = env
build_type = debug
build_flags =
  -DCORE_DEBUG_LEVEL=0
  -DMC_LOG_LEVEL=1
; 普段はOFF�E�ログ壁紙化防止�E�E; 忁E��なときだけ一時的にON�E�E;   -DEVT_DEBUG_ENABLED=1        ; EVT系DEBUG + TOUCHも追征E;   -DTOUCH_DEBUG_ENABLED=1      ; TOUCHだけ個別にON
build_src_filter =
  +<*>


; ===== QUIET�E��E閁E常用�E�E====
; EVTは残しつつ、E��常ログを極力静かにする想宁E
[env:m5stack-core2_quiet]
extends = env:m5stack-core2
build_unflags =
  -DMC_LOG_LEVEL=1
build_flags =
  ${env:m5stack-core2.build_flags}
  -DMC_LOG_LEVEL=0


; ===== DIAG�E�調査�E�E====
; 失敗系詳細めE��制琁E��、状態�E移琁E��を増やす想宁E
[env:m5stack-core2_diag]
extends = env:m5stack-core2
build_unflags =
  -DMC_LOG_LEVEL=1
build_flags =
  ${env:m5stack-core2.build_flags}
  -DMC_LOG_LEVEL=2
; 忁E��なときだけ個別にON�E�実裁E��入ったら使ぁE��E;  -DMC_LOG_STT_SSL=1
;  -DMC_LOG_REC_I2S=1


; ===== TRACE�E�短時間の追跡�E�E====
; ほぼ全部出す（常用しなぁE��E
[env:m5stack-core2_trace]
extends = env:m5stack-core2
build_unflags =
  -DMC_LOG_LEVEL=1
build_flags =
  ${env:m5stack-core2.build_flags}
  -DMC_LOG_LEVEL=3
  -DTOUCH_DEBUG_ENABLED=1
; TRACEでだけ許容する個別スイチE���E�実裁E��入ったら使ぁE��E;  -DMC_LOG_STT_SSL=1
;  -DMC_LOG_REC_I2S=1


; ===== 配币E���E�空設定でビルドしたい�E�E====
[env:m5stack-core2-dist]
extends = env:m5stack-core2
build_type = release

; 親の CORE_DEBUG_LEVEL / MC_LOG_LEVEL を外してから、E を�Eれる�E�警告消し�E�
build_unflags =
  -DCORE_DEBUG_LEVEL=3
  -DMC_LOG_LEVEL=1
  -Os

build_flags =
  -DMC_DISABLE_CONFIG_PRIVATE=1
  -DCORE_DEBUG_LEVEL=0
  -DMC_LOG_LEVEL=0
  -O3
  -fno-if-conversion


; ===== TTSベンチE��Eest側のmainを使ぁE��E====
[env:tts-bench]
extends = env:m5stack-core2
build_src_filter =
  +<*>
  -<main.cpp>
  -<ai_talk_controller.cpp>
  +<../test/tts-bench/main.cpp>


; ===== QIOチE��ト用 =====
[env:m5stack-core2-qio]
extends = env:m5stack-core2
board_build.flash_mode = qio
board_build.f_flash = 80000000L






